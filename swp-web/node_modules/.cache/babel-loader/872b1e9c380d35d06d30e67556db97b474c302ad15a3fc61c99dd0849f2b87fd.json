{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: 'AppPicture',\n  data() {\n    return {\n      name: '',\n      password: '',\n      picture: '',\n      NAME: '',\n      BALANCE: '',\n      USERID: '',\n      PASSWORD: '',\n      pictureid: '',\n      picturename: '',\n      pictureprice: '',\n      picturecreatid: ''\n    };\n  },\n  mounted() {\n    // 在组件加载时自动执行的函数\n    this.NAME = sessionStorage.getItem('NAME');\n    this.USERID = sessionStorage.getItem('USERID');\n    this.BALANCE = sessionStorage.getItem('BALANCE');\n    this.PASSWORD = sessionStorage.getItem('PASSWORD');\n    this.pictureid = this.$route.query.wpid;\n    sessionStorage.setItem('SEARCHTYPE', '');\n    console.log(this.NAME);\n    console.log(this.USERID);\n    console.log(this.PASSWORD);\n    console.log(this.BALANCE);\n    console.log(this.$route.query.name);\n    console.log(this.$route.query.vwid);\n    this.postImagePrice();\n  },\n  methods: {\n    loadpicture() {\n      let user = {\n        vwpId: this.pictureid,\n        orderId: '',\n        buyerId: this.USERID\n      };\n      if (this.BALANCE < this.pictureprice) {\n        alert(\"抱歉，您无法购买此壁纸，因为您的余额不足\");\n        location.reload();\n      }\n      if (this.USERID == this.picturecreatid) {\n        alert(\"抱歉，您无法购买此壁纸，因为您是壁纸的上传者\");\n        location.reload();\n      }\n      let self = this;\n      this.$axios.post('http://localhost:8090/vwporder/download', user) ////////////////////////////////////登录信息\n      .then(function (response) {\n        let result = response.data;\n        if (result.code === 200) {\n          console.log(\"登录成功！\");\n          console.log(\"返回的数据：\", result.data);\n          console.log(\"总记录数：\", result.total);\n          location.reload();\n        } else if (result.code === 400) {\n          console.log(\"失败！\");\n          alert(\"您无法购买此壁纸，因为你是此壁纸的上传者，或者您的余额不足\");\n          location.reload();\n        }\n      }).catch(function (error) {\n        console.log(\"请求错误：\", error);\n      });\n    },\n    touser() {\n      let self = this;\n      self.$router.push(\"/user\");\n    },\n    toindex() {\n      let self = this;\n      self.$router.push(\"/index\");\n    },\n    toupload() {\n      this.$router.push(\"/upload\");\n    },\n    async postImagePrice() {\n      let vwallpaper = {\n        vwpId: this.pictureid,\n        name: '',\n        createId: '',\n        price: '',\n        type: '',\n        path: ''\n      };\n      try {\n        //使用axios发送一个GET请求，假设后端有一个接口可以返回图片的文件名\n        let response = await axios.post(\"http://localhost:8090/vwallpaper/getImagesByVwpid\", vwallpaper);\n        //如果请求成功，将文件名保存到imageName属性中\n        if (response.status === 200) {\n          console.log(response.data);\n          console.log(this.imageName);\n          this.picturename = response.data.data[0].name;\n          this.picturecreatid = response.data.data[0].createId;\n          this.pictureprice = response.data.data[0].price;\n        }\n      } catch (error) {\n        //如果请求失败，打印错误信息\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","password","picture","NAME","BALANCE","USERID","PASSWORD","pictureid","picturename","pictureprice","picturecreatid","mounted","sessionStorage","getItem","$route","query","wpid","setItem","console","log","vwid","postImagePrice","methods","loadpicture","user","vwpId","orderId","buyerId","alert","location","reload","self","$axios","post","then","response","result","code","total","catch","error","touser","$router","push","toindex","toupload","vwallpaper","createId","price","type","path","status","imageName"],"sources":["src/components/AppPicture.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <div class=\"logo\">壁纸引擎--壁纸</div>\r\n            <div class=\"nav\">\r\n                <button @click=\"toindex\">首页</button>\r\n                <button>分类</button>\r\n                <button @click=\"toupload\">上传</button>\r\n                <div class=\"userimgbox\">\r\n                    <img src=\"../assets/tou1.jpg\" alt=\"\" width=\"25\" @click=\"touser\">\r\n                    <div>{{ this.NAME }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"nav\">\r\n            <button @click=\"toindex\"> 《--返回上一页</button>\r\n        </div>\r\n        <div class=\"info\">\r\n            <div>壁纸名称: {{this.picturename}}</div>\r\n            <div>壁纸价格: {{this.pictureprice}}￥</div>\r\n            <div>壁纸创作者: {{this.picturecreatid}}</div>\r\n            <button @click=\"loadpicture\">下载</button>\r\n        </div>\r\n        <div class=\"image\">\r\n            <img v-if=\"this.$route.query.name\" :src=\"this.$route.query.name\">\r\n        </div>\r\n        <div class=\"footer\">\r\n            <p>© 2023 壁纸引擎. All rights reserved.</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n    \r\n<script>\r\n\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n    name: 'AppPicture',\r\n    data() {\r\n        return {\r\n            name: '',\r\n            password: '',\r\n            picture: '',\r\n            NAME:'',\r\n            BALANCE:'',\r\n            USERID:'',\r\n            PASSWORD:'',\r\n            pictureid:'',\r\n            picturename:'',\r\n            pictureprice:'',\r\n            picturecreatid:'',\r\n        }\r\n    },\r\n    mounted() {\r\n      // 在组件加载时自动执行的函数\r\n      this.NAME=sessionStorage.getItem('NAME')\r\n      this.USERID=sessionStorage.getItem('USERID')\r\n      this.BALANCE=sessionStorage.getItem('BALANCE')\r\n      this.PASSWORD=sessionStorage.getItem('PASSWORD')\r\n      this.pictureid=this.$route.query.wpid;\r\n      sessionStorage.setItem('SEARCHTYPE', '')\r\n      console.log(this.NAME)\r\n      console.log(this.USERID)\r\n      console.log(this.PASSWORD)\r\n      console.log(this.BALANCE)\r\n      console.log(this.$route.query.name)\r\n      console.log(this.$route.query.vwid)\r\n      this.postImagePrice();\r\n    },\r\n    methods: {\r\n      loadpicture(){\r\n        let user = {\r\n          vwpId: this.pictureid,\r\n          orderId:'',\r\n          buyerId:this.USERID,\r\n        };\r\n        if(this.BALANCE<this.pictureprice)\r\n        {\r\n          alert(\"抱歉，您无法购买此壁纸，因为您的余额不足\");\r\n          location.reload();\r\n        }\r\n        if(this.USERID==this.picturecreatid)\r\n        {\r\n          alert(\"抱歉，您无法购买此壁纸，因为您是壁纸的上传者\");\r\n          location.reload();\r\n        }\r\n        let self = this;\r\n        this.$axios.post('http://localhost:8090/vwporder/download', user)     ////////////////////////////////////登录信息\r\n            .then(function (response) {\r\n              let result = response.data;\r\n              if (result.code === 200) {\r\n                console.log(\"登录成功！\");\r\n                console.log(\"返回的数据：\", result.data);\r\n                console.log(\"总记录数：\", result.total);\r\n\r\n                location.reload();\r\n              } else if (result.code === 400) {\r\n                console.log(\"失败！\");\r\n                alert(\"您无法购买此壁纸，因为你是此壁纸的上传者，或者您的余额不足\");\r\n                location.reload();\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              console.log(\"请求错误：\", error);\r\n            });\r\n\r\n      },\r\n        touser() {\r\n            let self = this;\r\n            self.$router.push(\"/user\");\r\n        },\r\n        toindex() {\r\n            let self = this;\r\n            self.$router.push(\"/index\");\r\n        },\r\n        toupload() {\r\n            this.$router.push(\"/upload\");\r\n        },\r\n        async postImagePrice() {\r\n        let vwallpaper = {\r\n\r\n          vwpId:this.pictureid ,\r\n          name:'',\r\n          createId:'',\r\n          price:'',\r\n          type:'',\r\n          path:''\r\n\r\n        };\r\n        try {\r\n          //使用axios发送一个GET请求，假设后端有一个接口可以返回图片的文件名\r\n          let response = await axios.post(\"http://localhost:8090/vwallpaper/getImagesByVwpid\",vwallpaper);\r\n          //如果请求成功，将文件名保存到imageName属性中\r\n          if (response.status === 200) {\r\n            console.log(response.data);\r\n            console.log(this.imageName);\r\n            this.picturename=response.data.data[0].name;\r\n            this.picturecreatid=response.data.data[0].createId;\r\n            this.pictureprice=response.data.data[0].price;\r\n\r\n          }\r\n        } catch (error) {\r\n          //如果请求失败，打印错误信息\r\n          console.error(error);\r\n        }\r\n      },\r\n    }\r\n}\r\n\r\n</script>\r\n    \r\n<style scoped>\r\nbody {\r\n    background-color: #f0f0f0;\r\n    font-family: Arial, sans-serif;\r\n}\r\n\r\n.container {\r\n    width: 80%;\r\n    margin: 0 auto;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px;\r\n}\r\n\r\n.logo {\r\n    font-size: 32px;\r\n    font-weight: bold;\r\n    color: #333333;\r\n}\r\n\r\n.nav {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.nav img:hover {\r\n  cursor: pointer;\r\n}\r\n\r\n.nav button {\r\n  text-decoration: none;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  border: none;\r\n  background-color: rgba(255, 255, 255, 0);\r\n}\r\n\r\n.nav button:hover {\r\n  color: #0099ff;\r\n  cursor: pointer;\r\n}\r\n\r\n.back {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.back a {\r\n    text-decoration: none;\r\n    color: #333333;\r\n    font-size: 16px;\r\n}\r\n\r\n.back a:hover {\r\n    color: #0099ff;\r\n}\r\n\r\n.image {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 20px;\r\n}\r\n\r\n.image img {\r\n    width: 80%;\r\n    height: auto;\r\n}\r\n\r\n.info {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: 20px;\r\n    margin-left: 90px;\r\n\r\n  gap: 20px;\r\n  width: 1000px;\r\n  height: 100px;\r\n  margin-right: 10px;\r\n  object-fit: cover;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.5);\r\n  /* 在盒子的顶部添加一个1像素宽的边框，颜色为白色，透明度为50%。 */\r\n  border-left: 1px solid rgba(255, 255, 255, 0.5);\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\r\n  backdrop-filter: blur(10px);\r\n  /* 对盒子应用一个模糊半透明的效果，模糊半径为10像素。这样可以创建玻璃模糊的效果，模糊盒子后面的内容。 */\r\n  background: rgba(50, 50, 50, 0.2);\r\n  /* 设置盒子的背景颜色为半透明的深灰色（RGB值为50, 50, 50），透明度为20%。 */\r\n\r\n  /* 设置盒子使用Flexbox布局。 */\r\n  /* 将Flex容器的主轴方向设置为垂直，使得项目在列方向上排列。 */\r\n  justify-content: center;\r\n  /*  在盒子的垂直方向上居中内容。 */\r\n  align-items: center;\r\n  /* 在盒子的水平方向上居中内容。 */\r\n  border-radius: 10px;\r\n  /* 应用一个10像素的圆角，使得盒子的角变得圆滑。 */\r\n}\r\n\r\n.info p {\r\n    font-size: 16px;\r\n    color: #333333;\r\n}\r\n\r\n.info button {\r\n    width: 100px;\r\n    height: 40px;\r\n    border: none;\r\n    border-radius: 20px;\r\n    background-color: #0099ff;\r\n    color: white;\r\n    font-size: 16px;\r\n}\r\n.info button:hover {\r\n    background-color: #0066cc;\r\n    cursor: pointer;\r\n}\r\n\r\n.footer {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 20px;\r\n}\r\n\r\n.footer p {\r\n    font-size: 14px;\r\n    color: #999999;\r\n}\r\n\r\n.userimgbox {\r\n    margin-top: 20px;\r\n}\r\n</style>\r\n    \r\n    "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}